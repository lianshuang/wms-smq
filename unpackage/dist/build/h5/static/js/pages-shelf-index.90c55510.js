(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-shelf-index"],{"029d":function(e,t,n){"use strict";n.r(t);var o=n("43a5"),a=n("1386");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var u,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,"68e362be",null,!1,o["a"],u);t["default"]=c.exports},1386:function(e,t,n){"use strict";n.r(t);var o=n("66f1"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"43a5":function(e,t,n){"use strict";var o,a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view")},i=[];n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}))},"66f1":function(e,t,n){"use strict";var o=n("ee27");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("f3f3")),i=n("66fd"),u={data:function(){return{}},onLoad:function(e){this.getStep(e.type)},created:function(){},methods:{getStep:function(e){var t=this;uni.showLoading({title:"加载中",mask:!0}),(0,i.getStep)({type:e}).then((function(e){console.log(e),200===e.code&&(t.getStepRouter(e.data.step),getApp().globalData.request=(0,a.default)({},getApp().globalData.request,{},e.data.params)),uni.hideLoading()})).catch((function(e){uni.hideLoading()}))}}};t.default=u},"66fd":function(e,t,n){"use strict";var o=n("ee27");Object.defineProperty(t,"__esModule",{value:!0}),t.pick_ship_pick_order=t.nextStep=t.getStep=t.getInfo=t.login=void 0;var a=o(n("ef92")),i=function(e){return a.default.post("auth/login/",e||{})};t.login=i;var u=function(e){return a.default.get("auth/info/",e||{})};t.getInfo=u;var r=function(e){return a.default.post("api/scanner/get_step/",e)};t.getStep=r;var c=function(e){return a.default.post("api/scanner/next_step/",e||{})};t.nextStep=c;var s=function(e){return a.default.post("api/scanner/pick_ship_pick_order/",e||{})};t.pick_ship_pick_order=s},ef92:function(e,t,n){"use strict";var o=n("ee27");n("99af"),n("caad"),n("a9e3"),n("d3b7"),n("2532"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("f0c4")),i=function(e,t){var n=t;return n},u=function(){uni.clearStorageSync(),uni.reLaunch({url:"/pages/login/Login"})},r=function(e,t){if(console.error("----接口错误----"),console.log(e),e.data){if(e.data.code)switch(Number(e.data.code)){case 401:u();break}t(e.data)}else t({msg:"接口錯誤"})},c=function(e,t,n){var o="",u={};switch(e){case"get":o="GET",u={"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"};break;case"post":o="POST",u={"Content-Type":"application/json; charset=UTF-8"};break;case"postForm":o="POST",u={"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"};break}var c=!1,s="loading...";return n&&(n.hideLoading&&(c=n.hideLoading,delete n.hideLoading),n.loadingText&&(s=n.loadingText,delete n.loadingText)),new Promise((function(e,d){!c&&uni.showLoading({title:s}),t.includes("login")||(u["Authorization"]="Bearer "+getApp().globalData.token),uni.request({url:"".concat(a.default.BASE_URL).concat(t),method:o,data:i(t,n),header:u,success:function(t){if(console.log(t),console.log("成功"),200==t.statusCode)401===t.data.code&&"Signature has expired."===t.data.detail&&"Auth failed"===t.data.message?(uni.showToast({title:"登陆已失效",mask:!0,duration:2e3,icon:"none",position:"top"}),setTimeout((function(){getApp().globalData={token:"",userInfo:{},request:{}},uni.clearStorageSync(),uni.redirectTo({url:"../../pages/login/index"})}),2010)):e(t.data);else{var n=t.statusCode+(t.data.detail?":"+t.data.detail:"");uni.showToast({title:n,mask:!0,duration:2e3,icon:"none",position:"top"}),d({msg:"请求錯誤（"+t.statusCode+(t.data.detail?":"+t.data.detail:"")+")"})}},fail:function(e){console.log("失败 ！"),console.log(e),console.log(d),r(e,d)},complete:function(){uni.hideLoading()}})}))},s=function(e,t){var n=t||{};return uni.showLoading({title:"上传中...",mask:!0}),new Promise((function(t,o){uni.uploadFile({url:"".concat(a.default.BASE_URL).concat(e),filePath:n.file,name:"file",formData:n,success:function(e){if(200==e.statusCode){var n=JSON.parse(e.data);200==n.code?t(n):(o(n),uni.showToast({title:n.msg||"接口错误("+n.code+")",icon:"none"}))}else uni.showToast({title:"未知错误(".concat(e.statusCode,")"),icon:"none"})},fail:function(e){uni.showToast({title:"接口请求超时",icon:"none"}),o(e.data)},complete:function(){uni.hideLoading()}})}))},d={get:function(e,t){return c("get",e,t)},post:function(e,t){return c("post",e,t)},postForm:function(e,t){return c("postForm",e,t)},upload:function(e,t){return s(e,t)}};t.default=d}}]);